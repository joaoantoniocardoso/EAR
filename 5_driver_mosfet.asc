Version 4
SHEET 1 880 916
WIRE -320 -896 -544 -896
WIRE -48 -896 -256 -896
WIRE -768 -768 -944 -768
WIRE -640 -768 -640 -800
WIRE -640 -768 -704 -768
WIRE -544 -768 -544 -896
WIRE -544 -768 -640 -768
WIRE -416 -768 -544 -768
WIRE -48 -768 -48 -896
WIRE -48 -768 -160 -768
WIRE 48 -768 48 -816
WIRE 48 -768 -48 -768
WIRE -944 -704 -944 -768
WIRE -640 -704 -640 -768
WIRE -544 -704 -544 -768
WIRE -48 -704 -48 -768
WIRE 48 -704 48 -768
WIRE -944 -576 -944 -624
WIRE -640 -576 -640 -640
WIRE -640 -576 -944 -576
WIRE -544 -576 -544 -640
WIRE -544 -576 -640 -576
WIRE -288 -576 -288 -672
WIRE -288 -576 -544 -576
WIRE -48 -576 -48 -640
WIRE -48 -576 -288 -576
WIRE 48 -576 48 -640
WIRE 48 -576 -48 -576
WIRE -944 -544 -944 -576
WIRE 128 -336 128 -384
WIRE 128 -336 -64 -336
WIRE 320 -336 128 -336
WIRE -64 -272 -64 -336
WIRE -64 -272 -208 -272
WIRE 320 -272 320 -336
WIRE 464 -272 320 -272
WIRE -208 -240 -208 -272
WIRE 464 -240 464 -272
WIRE -64 -176 -64 -272
WIRE 320 -176 320 -272
WIRE -208 -128 -208 -160
WIRE -144 -128 -208 -128
WIRE 464 -128 464 -160
WIRE 464 -128 400 -128
WIRE -416 -80 -544 -80
WIRE -336 -80 -416 -80
WIRE -272 -80 -336 -80
WIRE 592 -80 528 -80
WIRE 672 -80 592 -80
WIRE 800 -80 672 -80
WIRE -336 0 -544 0
WIRE -208 0 -208 -32
WIRE -208 0 -336 0
WIRE 464 0 464 -32
WIRE 592 0 464 0
WIRE 800 0 592 0
WIRE -544 32 -544 0
WIRE -208 32 -208 0
WIRE -64 32 -64 -80
WIRE -16 32 -64 32
WIRE 80 32 48 32
WIRE 192 32 160 32
WIRE 320 32 320 -80
WIRE 320 32 272 32
WIRE 464 32 464 0
WIRE 800 32 800 0
WIRE -64 112 -64 32
WIRE 320 112 320 32
WIRE -416 160 -544 160
WIRE -336 160 -416 160
WIRE -240 160 -256 160
WIRE -144 160 -240 160
WIRE 496 160 400 160
WIRE 512 160 496 160
WIRE 672 160 592 160
WIRE 800 160 672 160
WIRE -240 240 -240 160
WIRE 496 240 496 160
WIRE -544 256 -544 240
WIRE 800 256 800 240
WIRE -160 288 -176 288
WIRE -64 288 -64 208
WIRE -64 288 -80 288
WIRE 320 288 320 208
WIRE 336 288 320 288
WIRE 432 288 416 288
WIRE -64 352 -64 288
WIRE 128 352 -64 352
WIRE 320 352 320 288
WIRE 320 352 128 352
WIRE -240 368 -240 336
WIRE 496 368 496 336
WIRE 128 464 128 352
WIRE 128 464 16 464
WIRE -240 480 -320 480
WIRE -208 480 -240 480
WIRE -96 480 -128 480
WIRE -48 480 -96 480
WIRE -240 496 -240 480
WIRE 64 496 16 496
WIRE 128 496 128 464
WIRE 64 560 64 496
WIRE 64 560 -96 560
WIRE 128 624 128 576
WIRE -96 656 -96 640
WIRE -928 688 -928 416
WIRE -544 688 -544 416
WIRE -928 832 -928 768
WIRE -928 832 -1040 832
WIRE -800 832 -800 416
WIRE -800 832 -928 832
WIRE -672 832 -672 416
WIRE -672 832 -800 832
WIRE -544 832 -544 768
WIRE -544 832 -672 832
WIRE -928 896 -928 832
FLAG -640 -800 +V
FLAG -944 -544 0
FLAG 48 -816 +5V
FLAG -208 32 0
FLAG 128 -384 +V
FLAG -240 368 0
FLAG -544 256 0
FLAG -544 32 0
FLAG 464 32 0
FLAG 128 624 0
FLAG 496 368 0
FLAG 800 256 0
FLAG 800 32 0
FLAG -96 656 0
FLAG -320 480 VAMP
FLAG -16 448 0
FLAG -16 512 +5V
FLAG -16 32 A
FLAG 272 32 B
FLAG -240 560 0
FLAG -416 -80 HSA
FLAG 672 -80 HSB
FLAG 672 160 LSB
FLAG -416 160 LSA
FLAG 48 32 A
FLAG 192 32 B
FLAG -928 416 HSA
FLAG -800 416 LSA
FLAG -672 416 HSB
FLAG -544 416 LSB
FLAG -928 896 0
SYMBOL polcap -656 -704 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName C1
SYMATTR Value 470u
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=35 Irms=580m Rser=0.12 Lser=0 mfg="Nichicon" pn="UPR1V471MPH" type="Al electrolytic"
SYMBOL cap -560 -704 R0
SYMATTR InstName C2
SYMATTR Value 0.1u
SYMATTR SpiceLine V=50 Irms=728m Rser=0.14361 Lser=0 mfg="KEMET" pn="C0603C104K5RAC" type="X7R"
SYMBOL voltage -944 -720 R0
SYMATTR InstName External1
SYMATTR Value 12
SYMBOL EXTRA\\VolReg\\LM7805-1 -288 -768 R0
SYMATTR InstName U1
SYMBOL diode -256 -912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL polcap 32 -704 R0
WINDOW 3 24 56 Left 2
SYMATTR InstName C3
SYMATTR Value 10u
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=10 Irms=0 Rser=2.5 Lser=0 mfg="AVX" pn="TAJC106M010" type="Tantalum"
SYMBOL cap -64 -704 R0
SYMATTR InstName C4
SYMATTR Value 0.1u
SYMATTR SpiceLine V=50 Irms=728m Rser=0.14361 Lser=0 mfg="KEMET" pn="C0603C104K5RAC" type="X7R"
SYMBOL diode -768 -752 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL npn -272 -128 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res -352 -96 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -224 -256 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL EXTRA\\IRF\\NMOSFET\\irf640 -96 160 R0
SYMATTR InstName U2
SYMBOL EXTRA\\IRF\\PMOSFET\\irf9640 -64 -128 R0
SYMATTR InstName U3
SYMBOL res -240 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL npn -176 240 M0
SYMATTR InstName Q2
SYMATTR Value BC817-25
SYMBOL res -176 272 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res -560 -96 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -560 144 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL npn 528 -128 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 608 -96 M0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 480 -256 M0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL EXTRA\\IRF\\NMOSFET\\irf640 352 160 M0
SYMATTR InstName U4
SYMBOL EXTRA\\IRF\\PMOSFET\\irf9640 320 -128 M0
SYMATTR InstName U5
SYMBOL res 496 144 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL npn 432 240 R0
SYMATTR InstName Q4
SYMATTR Value BC817-25
SYMBOL res 432 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 112 480 R0
SYMATTR InstName shunt1
SYMATTR Value 1
SYMBOL res 816 -96 M0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 816 144 M0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL EXTRA\\ExtraOpamps\\LM358_NS -16 480 R180
SYMATTR InstName U6
SYMBOL res -112 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL res -112 576 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL res -112 544 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL cap -256 496 R0
SYMATTR InstName C5
SYMATTR Value 1u
SYMBOL res 176 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName BDC
SYMATTR Value 100
SYMBOL voltage -1040 736 R0
WINDOW 3 -46 -190 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 0 1n 1n 0.3e-3 1e-3)
SYMBOL voltage -928 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL voltage -544 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
TEXT -746 -496 Left 2 !.tran 5m startup
